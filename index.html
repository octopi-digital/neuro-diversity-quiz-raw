<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Neuro Divergent Quiz</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Custom styles for smooth transitions -->
    <style>
      .rotate-180 {
        transform: rotate(180deg);
      }
    </style>
  </head>

  <body class="bg-white">
    <!-- Navbar starts -->
    <div class="shadow-md mb-10">
      <div
        class="py-2 max-w-screen-lg mx-auto flex justify-between items-center px-5 lg:px-0"
      >
        <!-- Logo -->
        <div>
          <img
            src="https://storage.googleapis.com/msgsndr/X11laCn76m2ZqQWTRr3w/media/67148a0780829f10a38821ff.png"
            class="h-16"
            alt="Logo"
          />
        </div>

        <!-- Hamburger Menu for Mobile -->
        <div class="md:hidden">
          <button class="text-gray-900 focus:outline-none" id="hamburger-btn">
            <!-- Hamburger Icon -->
            <svg
              class="w-6 h-6"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M4 6h16M4 12h16m-7 6h7"
              ></path>
            </svg>
          </button>
        </div>

        <!-- Desktop Menu -->
        <div class="hidden md:flex items-center space-x-4">
          <div class="group relative">
            <p
              class="text-gray-900 group-hover:bg-[#FF5300] hover:text-white px-2 py-1 rounded-md transition-colors duration-200"
            >
              Traits
            </p>
          </div>
          <div class="group relative">
            <p
              class="text-gray-900 group-hover:bg-[#FF5300] hover:text-white px-2 py-1 rounded-md transition-colors duration-200"
            >
              Conditions
            </p>
          </div>
          <div class="group relative">
            <p
              class="text-gray-900 group-hover:bg-[#FF5300] hover:text-white px-2 py-1 rounded-md transition-colors duration-200"
            >
              Diagnosis
            </p>
            <ul
              class="absolute left-0 mt-2 hidden group-hover:block bg-white shadow-lg rounded-md p-2"
            >
              <li>
                <p class="block px-4 py-2 text-gray-700 hover:text-gray-900">
                  As a Child
                </p>
              </li>
              <li>
                <p class="block px-4 py-2 text-gray-700 hover:text-gray-900">
                  As an Adult
                </p>
              </li>
              <li>
                <p class="block px-4 py-2 text-gray-700 hover:text-gray-900">
                  Self Diagnosis
                </p>
              </li>
            </ul>
          </div>
          <button
            class="py-1 px-3 bg-blue-500 hover:bg-blue-600 transition-colors duration-200 active:scale-95 text-white rounded-full ml-6"
          >
            Donate
          </button>
          <img
            src="https://storage.googleapis.com/msgsndr/X11laCn76m2ZqQWTRr3w/media/67148a07033706c1eef0f1af.png"
            class="h-16 ml-2"
            alt="Transparency"
          />
        </div>

        <!-- Mobile Menu -->
        <div
          id="mobile-menu"
          class="md:hidden absolute top-16 right-4 w-3/5 sm:w-1/3 max-h-[90vh] overflow-y-auto bg-white border shadow-2xl rounded-md z-50 hidden"
        >
          <ul class="w-full flex flex-col items-start p-4 divide-y">
            <li class="w-full">
              <p
                class="text-gray-900 w-full p-4 hover:bg-[#746E5E] rounded-md flex justify-between items-center"
                data-target="traits"
              >
                Traits
              </p>
            </li>
            <li class="w-full">
              <p
                class="text-gray-900 w-full p-4 hover:bg-[#746E5E] rounded-md flex justify-between items-center"
                data-target="conditions"
              >
                Conditions
              </p>
            </li>
            <li class="w-full">
              <p
                class="text-gray-900 w-full p-4 hover:bg-[#746E5E] rounded-md flex justify-between items-center"
                onclick="toggleSubmenu('diagnosis')"
              >
                Diagnosis
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="transition duration-200"
                  id="arrow-diagnosis"
                >
                  <path d="m6 9 6 6 6-6" />
                </svg>
              </p>
              <ul
                id="submenu-diagnosis"
                class="pl-4 hidden transition-all duration-300 ease-in-out"
              >
                <li>
                  <a
                    href="#"
                    class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                    >As a Child</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                    >As an Adult</a
                  >
                </li>
                <li>
                  <a
                    href="#"
                    class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                    >Self Diagnosis</a
                  >
                </li>
              </ul>
            </li>
            <button
              class="py-2 px-3 mt-6 w-full bg-blue-500 hover:bg-blue-600 transition-colors duration-200 active:scale-95 text-white rounded-full"
            >
              Donate
            </button>
          </ul>
        </div>
      </div>
    </div>
    <!-- Navbar Ends -->

    <!-- Patient Info Form Starts -->
    <div
      class="f shadow-md my-auto bg-gray-100 p-5 m-5 md:p-8 lg:p-10 max-w-lg mx-auto rounded-lg bg-white"
      id="patient-info"
    >
      <h1 class="text-2xl font-bold text-[#1D126C] mb-6 text-center">
        Neurodivergent Workplace Inclusion Test
      </h1>
      <form id="patient-form">
        <div class="mb-4">
          <label class="block mb-1 font-medium" for="name">Name</label>
          <input
            type="text"
            id="name"
            name="name"
            placeholder="Enter your name"
            class="w-full p-2 focus:outline-blue-500 border-gray-300 rounded"
          />
          <p id="name-error" class="text-red-600 text-sm hidden"></p>
        </div>

        <div class="mb-4">
          <label class="block mb-1 font-medium" for="email">Email</label>
          <input
            type="email"
            id="email"
            name="email"
            placeholder="Enter your email address"
            class="w-full p-2 focus:outline-blue-500 border-gray-300 rounded"
          />
          <p id="email-error" class="text-red-600 text-sm hidden"></p>
        </div>

        <button
          onclick="renderQuiz"
          class="w-full p-3 bg-blue-600 hover:bg-blue-700 transition-colors duration-200 rounded-md text-white"
        >
          Start
        </button>
      </form>
    </div>
    <!-- Patient Info Ends -->

    <div id="answer_button" class="flex justify-center hidden">
      <button
        onclick="answerAllQuestionsRandomly()"
        class="bg-blue-500 text-white px-4 py-2 rounded-md mx-auto"
      >
        Answer All Questions
      </button>
    </div>

    <!-- Button for answering all questions for testing -->

    <div class="pb-16" id="quiz-app">
      <!-- Placeholder for Quiz content -->
    </div>

    <div
      class="overflow-x-auto flex flex-col justify-center"
      id="result-container"
    >
      <!-- Results will be injected here -->
    </div>
    <!-- Graph Section -->

    <!-- Charts -->
    <div id="charts-container" class="p-5 rounded-lg space-y-6 hidden">
      <div id="si-container" class="bg-white max-w-screen-lg mx-auto px-6">
        <p class="text-center text-2xl text-[#1d126c] font-semibold">
          Social Inclusion
        </p>
        <div class="h-[180px] flex justify-center w-full bg-white">
          <canvas id="si-graph" height="100"></canvas>
        </div>
      </div>
      <div id="dm-container" class="bg-white max-w-screen-lg mx-auto px-6">
        <p class="text-center text-2xl text-[#1d126c] font-medium">
          Decision Making
        </p>
        <div class="h-[180px] flex justify-center w-full">
          <canvas id="dm-graph" height="100"></canvas>
        </div>
      </div>
      <div id="simp-container" class="bg-white max-w-screen-lg mx-auto px-6">
        <p class="text-center text-2xl text-[#1d126c] font-medium">
          Sensory Impact
        </p>
        <div class="h-[180px] flex justify-center w-full bg-white">
          <canvas id="simp-graph" height="100"></canvas>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      // Mobile menu toggle
      const hamburgerBtn = document.getElementById("hamburger-btn");
      const mobileMenu = document.getElementById("mobile-menu");

      hamburgerBtn.addEventListener("click", () => {
        mobileMenu.classList.toggle("hidden");
      });

      // Submenu toggle
      function toggleSubmenu(menuId) {
        const submenu = document.getElementById(`submenu-${menuId}`);
        const arrow = document.getElementById(`arrow-${menuId}`);

        submenu.classList.toggle("hidden");
        arrow.classList.toggle("rotate-180");
      }

      // Close mobile menu if clicked outside
      document.addEventListener("click", function (event) {
        if (
          !mobileMenu.contains(event.target) &&
          !hamburgerBtn.contains(event.target)
        ) {
          mobileMenu.classList.add("hidden");
        }
      });

      // Patient Info JS Starts
      document.addEventListener("DOMContentLoaded", function () {
        const patientForm = document.getElementById("patient-form");
        const nameInput = document.getElementById("name");
        const emailInput = document.getElementById("email");
        const nameError = document.getElementById("name-error");
        const emailError = document.getElementById("email-error");

        patientForm.addEventListener("submit", function (e) {
          e.preventDefault();
          patientData = {
            name: nameInput.value,
            email: emailInput.value,
          };

          // Clear previous errors
          nameError.classList.add("hidden");
          emailError.classList.add("hidden");

          // Validate the input
          let hasError = false;
          if (!patientData.name) {
            nameError.textContent = "Name is required.";
            nameError.classList.remove("hidden");
            hasError = true;
          }
          if (!patientData.email) {
            emailError.textContent = "Email is required.";
            emailError.classList.remove("hidden");
            hasError = true;
          } else if (!/\S+@\S+\.\S+/.test(patientData.email)) {
            emailError.textContent = "Email address is invalid.";
            emailError.classList.remove("hidden");
            hasError = true;
          }

          // If no validation errors, log the data
          if (!hasError) {
            console.log("Patient Data Submitted:", patientData);
            // Reset the form (optional)
            // patientForm.reset();
            renderQuiz();
          }
        });
      });
      // Patient Info JS Ends

      // Quiz JS Starts
      const questions = [
        {
          _id: "670b68430d5b50b31837bf9e",
          sections: [
            {
              name: "Demographics",
              questions: [
                {
                  question_id: 1,
                  question: "First Name",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value: "^[A-Za-zÀ-Üà-ü \\-']{1,150}$",
                    error_message: "Please enter a valid first name",
                  },
                },
                {
                  question_id: 2,
                  question: "Last Name",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value: "^[A-Za-zÀ-Üà-ü \\-']{1,150}$",
                    error_message: "Please enter a valid last name",
                  },
                },
                {
                  question_id: 3,
                  question: "Date of Birth",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "date",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value: "^[0-9]{4}-[0-9]{2}-[0-9]{2}$",
                    error_message:
                      "Please enter a valid date of birth (yyyy-mm-dd)",
                  },
                },
                {
                  question_id: 4,
                  question: "Sex at Birth",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "male",
                      label: "Male",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "female",
                      label: "Female",
                    },
                  ],
                },
                {
                  question_id: 5,
                  question: "Email Address",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "email",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value:
                      "^[\\w\\.\\-\\+]+@[A-Za-z0-9\\.\\-]+\\.[A-Za-z]{2,4}$",
                    error_message: "Please enter a valid email address",
                  },
                },
                {
                  question_id: 6,
                  question: "Phone Number",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "phone",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value: "^[0-9]{10}$",
                    error_message: "Please enter a valid US phone number",
                  },
                },
                {
                  question_id: 7,
                  question: "Address",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value: "^[A-Za-z0-9'\\.\\-, ]{1,46}$",
                    error_message:
                      "Please enter a valid address, no special characters",
                  },
                },
                {
                  question_id: 8,
                  question: "City",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value: "^[A-Za-z\\.\\- ]{1,28}$",
                    error_message: "Please enter a valid city name",
                  },
                },
                {
                  question_id: 9,
                  question: "State",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value: "^[0-9]{1,3}$",
                    error_message: "Please select a valid state id",
                  },
                },
                {
                  question_id: 10,
                  question: "Zip Code",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value: "^[0-9]{5}$",
                    error_message: "Please enter a valid US zip code",
                  },
                },
                {
                  question_id: 11,
                  question: "Timezone",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value: "^[0-9]{1,2}$",
                    error_message: "Please select a valid timezone id",
                  },
                },
                {
                  question_id: 12,
                  question: "Height",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value: "^[0-9]{1,2}$",
                    error_message: "Please enter a valid height",
                  },
                },
                {
                  question_id: 13,
                  question: "Weight",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value: "^[0-9]{1,4}$",
                    error_message: "Please enter a valid weight",
                  },
                },
                {
                  question_id: 14,
                  question: "Current State",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value: "^[0-9]{1,3}$",
                    error_message: "Please select a valid state id",
                  },
                },
              ],
            },
            {
              name: "Health History",
              questions: [
                {
                  question_id: 15,
                  question: "What is your goal weight?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value: "^[0-9]{1,3}$",
                    error_message: "Please enter a goal weight",
                  },
                },
                {
                  question_id: 16,
                  question: "When was the last time you were that weight?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "1-2 years",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "3-5 years",
                    },
                    {
                      answer_id: 3,
                      required: true,
                      value_type: "string",
                      value: "6-10 years",
                    },
                    {
                      answer_id: 4,
                      required: true,
                      value_type: "string",
                      value: "More than 10 years",
                    },
                    {
                      answer_id: 5,
                      required: true,
                      value_type: "string",
                      value: "Never",
                    },
                  ],
                },
                {
                  question_id: 17,
                  question: "Drug Allergies",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "confirm",
                      value: "reviewed",
                      label: "I have reviewed and confirmed drug allergies",
                    },
                  ],
                },
                {
                  question_id: 18,
                  question: "Current Medications",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "confirm",
                      value: "reviewed",
                      label:
                        "I have reviewed and confirmed current medications",
                    },
                  ],
                },
                {
                  question_id: 19,
                  question:
                    "Have you had an annual physical exam in the past 12 months?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 20,
                  question:
                    "Have you had any lab tests done in the past 6 months?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 21,
                  question:
                    "Can we send you a text message with a secure link to upload your past results?",
                  show_if: {
                    section_id: 2,
                    question_id: 6,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 22,
                  question:
                    "Do you have a history of Polycystic ovary syndrome - PCOS?",
                  show_if: {
                    section_id: 1,
                    question_id: 4,
                    answer_ids: [2],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 23,
                  question: "Do you have a history of fibroids?",
                  show_if: {
                    section_id: 1,
                    question_id: 4,
                    answer_ids: [2],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 24,
                  question: "Do you have a history of endometriosis?",
                  show_if: {
                    section_id: 1,
                    question_id: 4,
                    answer_ids: [2],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 25,
                  question: "Do you have a history of tumors?",
                  show_if: {
                    section_id: 1,
                    question_id: 4,
                    answer_ids: [2],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 26,
                  question: "Are you currently pregnant or breast feeding?",
                  show_if: {
                    section_id: 1,
                    question_id: 4,
                    answer_ids: [2],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 27,
                  question: "Date of last menstrual period - LMP",
                  show_if: {
                    section_id: 1,
                    question_id: 4,
                    answer_ids: [2],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "date",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value: "^[0-9]{4}-[0-9]{2}-[0-9]{2}$",
                    error_message:
                      "Please enter a valid date of last menstrual period (yyyy-mm-dd)",
                  },
                },
                {
                  question_id: 28,
                  question: "Do you use any contraceptives?",
                  show_if: {
                    section_id: 1,
                    question_id: 4,
                    answer_ids: [2],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 29,
                  question: "Are you currently taking relevant medications?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 30,
                  question: "Current Relevant Medications",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "confirm",
                      value: "reviewed",
                      label:
                        "I have reviewed and confirmed current relevant medications",
                    },
                  ],
                },
                {
                  question_id: 31,
                  question:
                    "Can we send you a text message with a secure link to upload your relevant prescriptions?",
                  show_if: {
                    section_id: 2,
                    question_id: 15,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 32,
                  question: "Too Expensive",
                  show_if: {
                    section_id: 2,
                    question_id: 15,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "yes",
                    },
                  ],
                },
                {
                  question_id: 33,
                  question: "Strength of medication not working",
                  show_if: {
                    section_id: 2,
                    question_id: 15,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "yes",
                    },
                  ],
                },
                {
                  question_id: 34,
                  question: "Did not like side effects",
                  show_if: {
                    section_id: 2,
                    question_id: 15,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "yes",
                    },
                  ],
                },
                {
                  question_id: 35,
                  question: "Please describe",
                  show_if: {
                    section_id: 2,
                    question_id: 20,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                    },
                  ],
                },
                {
                  question_id: 36,
                  question: "Other",
                  show_if: {
                    section_id: 2,
                    question_id: 15,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "yes",
                    },
                  ],
                },
                {
                  question_id: 37,
                  question: "Comments",
                  show_if: {
                    section_id: 2,
                    question_id: 22,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                    },
                  ],
                },
              ],
            },
            {
              name: "Behavioral Health",
              questions: [
                {
                  question_id: 38,
                  question: "Little interest or pleasure in doing things",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                      value: 0,
                      label: "Not at all",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "numeric",
                      value: 1,
                      label: "Several days",
                    },
                    {
                      answer_id: 3,
                      required: true,
                      value_type: "numeric",
                      value: 2,
                      label: "More than half the days",
                    },
                    {
                      answer_id: 4,
                      required: true,
                      value_type: "numeric",
                      value: 3,
                      label: "Nearly every day",
                    },
                  ],
                },
                {
                  question_id: 39,
                  question: "Feeling down, depressed, or hopeless",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                      value: 0,
                      label: "Not at all",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "numeric",
                      value: 1,
                      label: "Several days",
                    },
                    {
                      answer_id: 3,
                      required: true,
                      value_type: "numeric",
                      value: 2,
                      label: "More than half the days",
                    },
                    {
                      answer_id: 4,
                      required: true,
                      value_type: "numeric",
                      value: 3,
                      label: "Nearly every day",
                    },
                  ],
                },
                {
                  question_id: 40,
                  question:
                    "Trouble falling or staying asleep, or sleeping too much",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                      value: 0,
                      label: "Not at all",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "numeric",
                      value: 1,
                      label: "Several days",
                    },
                    {
                      answer_id: 3,
                      required: true,
                      value_type: "numeric",
                      value: 2,
                      label: "More than half the days",
                    },
                    {
                      answer_id: 4,
                      required: true,
                      value_type: "numeric",
                      value: 3,
                      label: "Nearly every day",
                    },
                  ],
                },
                {
                  question_id: 41,
                  question: "Feeling tired or having little energy",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                      value: 0,
                      label: "Not at all",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "numeric",
                      value: 1,
                      label: "Several days",
                    },
                    {
                      answer_id: 3,
                      required: true,
                      value_type: "numeric",
                      value: 2,
                      label: "More than half the days",
                    },
                    {
                      answer_id: 4,
                      required: true,
                      value_type: "numeric",
                      value: 3,
                      label: "Nearly every day",
                    },
                  ],
                },
                {
                  question_id: 42,
                  question: "Poor appetite or overeating",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                      value: 0,
                      label: "Not at all",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "numeric",
                      value: 1,
                      label: "Several days",
                    },
                    {
                      answer_id: 3,
                      required: true,
                      value_type: "numeric",
                      value: 2,
                      label: "More than half the days",
                    },
                    {
                      answer_id: 4,
                      required: true,
                      value_type: "numeric",
                      value: 3,
                      label: "Nearly every day",
                    },
                  ],
                },
                {
                  question_id: 43,
                  question:
                    "Feeling bad about yourself — or that you are a failure, or you have let yourself or your family down",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                      value: 0,
                      label: "Not at all",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "numeric",
                      value: 1,
                      label: "Several days",
                    },
                    {
                      answer_id: 3,
                      required: true,
                      value_type: "numeric",
                      value: 2,
                      label: "More than half the days",
                    },
                    {
                      answer_id: 4,
                      required: true,
                      value_type: "numeric",
                      value: 3,
                      label: "Nearly every day",
                    },
                  ],
                },
                {
                  question_id: 44,
                  question:
                    "Trouble concentrating on things, such as reading the newspaper or watching television",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                      value: 0,
                      label: "Not at all",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "numeric",
                      value: 1,
                      label: "Several days",
                    },
                    {
                      answer_id: 3,
                      required: true,
                      value_type: "numeric",
                      value: 2,
                      label: "More than half the days",
                    },
                    {
                      answer_id: 4,
                      required: true,
                      value_type: "numeric",
                      value: 3,
                      label: "Nearly every day",
                    },
                  ],
                },
                {
                  question_id: 45,
                  question:
                    "Moving or speaking so slowly that other people could have noticed? Or the opposite — being so fidgety or restless that you have been moving around a lot more than usual.",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                      value: 0,
                      label: "Not at all",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "numeric",
                      value: 1,
                      label: "Several days",
                    },
                    {
                      answer_id: 3,
                      required: true,
                      value_type: "numeric",
                      value: 2,
                      label: "More than half the days",
                    },
                    {
                      answer_id: 4,
                      required: true,
                      value_type: "numeric",
                      value: 3,
                      label: "Nearly every day",
                    },
                  ],
                },
                {
                  question_id: 46,
                  question:
                    "Thoughts that you would be better off dead or of hurting yourself in some way",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "numeric",
                      value: 0,
                      label: "Not at all",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "numeric",
                      value: 1,
                      label: "Several days",
                    },
                    {
                      answer_id: 3,
                      required: true,
                      value_type: "numeric",
                      value: 2,
                      label: "More than half the days",
                    },
                    {
                      answer_id: 4,
                      required: true,
                      value_type: "numeric",
                      value: 3,
                      label: "Nearly every day",
                    },
                  ],
                },
              ],
            },
            {
              name: "Medical History",
              questions: [
                {
                  question_id: 47,
                  question:
                    "Do you have a history of cardiac disorders or events?",
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value:
                        "Myocardial Infarction, commonly known as a Heart Attack, or Blockage with Stent Placement",
                      label:
                        "Myocardial Infarction, commonly known as a Heart Attack, or Blockage with Stent Placement",
                    },
                    {
                      answer_id: 2,
                      required: false,
                      value_type: "string",
                      value:
                        "Cerebrovascular Accident including Stroke, Mini-Stroke TIA, or Hemorrhage",
                      label:
                        "Cerebrovascular Accident including Stroke, Mini-Stroke TIA, or Hemorrhage",
                    },
                    {
                      answer_id: 3,
                      required: false,
                      value_type: "string",
                      value: "Thrombosis or Embolism due to Blood Clot",
                      label: "Thrombosis or Embolism due to Blood Clot",
                    },
                    {
                      answer_id: 4,
                      required: false,
                      value_type: "string",
                      value: "Coronary Artery Bypass Graft Surgery - CABG",
                      label: "Coronary Artery Bypass Graft Surgery - CABG",
                    },
                    {
                      answer_id: 5,
                      required: false,
                      value_type: "string",
                      value: "Aortic or Mitral Valve Disorder or Replacement",
                      label: "Aortic or Mitral Valve Disorder or Replacement",
                    },
                    {
                      answer_id: 6,
                      required: false,
                      value_type: "string",
                      value:
                        "Endocarditis, Pericarditis, or Cardiomyopathy - Enlarged Heart",
                      label:
                        "Endocarditis, Pericarditis, or Cardiomyopathy - Enlarged Heart",
                    },
                    {
                      answer_id: 7,
                      required: false,
                      value_type: "string",
                      value:
                        "Cardiac Conduction Disorder such as AV Block or Bundle Branch Block",
                      label:
                        "Cardiac Conduction Disorder such as AV Block or Bundle Branch Block",
                    },
                    {
                      answer_id: 8,
                      required: false,
                      value_type: "string",
                      value:
                        "Cardiac Arrhythmia including Atrial Fibrillation, Atrial Flutter, or Tachycardia",
                      label:
                        "Cardiac Arrhythmia including Atrial Fibrillation, Atrial Flutter, or Tachycardia",
                    },
                    {
                      answer_id: 9,
                      required: false,
                      value_type: "string",
                      value:
                        "Heart Failure, also known as Congestive Heart Failure or CHF",
                      label:
                        "Heart Failure, also known as Congestive Heart Failure or CHF",
                    },
                    {
                      answer_id: 10,
                      required: false,
                      value_type: "string",
                      value: "Pacemaker or Defibrillator Placement",
                      label: "Pacemaker or Defibrillator Placement",
                    },
                  ],
                },
                {
                  question_id: 48,
                  question:
                    "Have you previously been diagnosed with any medical conditions?",
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "Sleep Apnea",
                      label: "Sleep Apnea",
                    },
                    {
                      answer_id: 2,
                      required: false,
                      value_type: "string",
                      value: "CPAP in Use",
                      label: "CPAP in Use",
                    },
                    {
                      answer_id: 3,
                      required: false,
                      value_type: "string",
                      value: "Snoring",
                      label: "Snoring",
                    },
                    {
                      answer_id: 4,
                      required: false,
                      value_type: "string",
                      value: "Chronic Kidney Disease",
                      label: "Chronic Kidney Disease",
                    },
                    {
                      answer_id: 5,
                      required: false,
                      value_type: "string",
                      value: "Abnormal Liver Function",
                      label: "Abnormal Liver Function",
                    },
                    {
                      answer_id: 6,
                      required: false,
                      value_type: "string",
                      value: "COPD or Emphysema",
                      label: "COPD or Emphysema",
                    },
                    {
                      answer_id: 7,
                      required: false,
                      value_type: "string",
                      value: "High Blood Pressure",
                      label: "High Blood Pressure",
                    },
                    {
                      answer_id: 8,
                      required: false,
                      value_type: "string",
                      value: "Low Blood Pressure",
                      label: "Low Blood Pressure",
                    },
                    {
                      answer_id: 9,
                      required: false,
                      value_type: "string",
                      value: "High Cholesterol",
                      label: "High Cholesterol",
                    },
                    {
                      answer_id: 10,
                      required: false,
                      value_type: "string",
                      value: "Peripheral Artery Disease",
                      label: "Peripheral Artery Disease",
                    },
                    {
                      answer_id: 11,
                      required: false,
                      value_type: "string",
                      value: "Chronic Lymph Node Enlargement",
                      label: "Chronic Lymph Node Enlargement",
                    },
                    {
                      answer_id: 12,
                      required: false,
                      value_type: "string",
                      value: "Hypogonadism",
                      label: "Hypogonadism",
                    },
                    {
                      answer_id: 13,
                      required: false,
                      value_type: "string",
                      value:
                        "Inability to get pregnant despite unprotected sex for more than one year",
                      label:
                        "Inability to get pregnant despite unprotected sex for more than one year",
                    },
                    {
                      answer_id: 14,
                      required: false,
                      value_type: "string",
                      value: "Diabetes Type I Diabetes Type II",
                      label: "Diabetes Type I Diabetes Type II",
                    },
                    {
                      answer_id: 15,
                      required: false,
                      value_type: "string",
                      value: "Hypothyroidism",
                      label: "Hypothyroidism",
                    },
                    {
                      answer_id: 16,
                      required: false,
                      value_type: "string",
                      value: "Hyperthyroidism",
                      label: "Hyperthyroidism",
                    },
                    {
                      answer_id: 17,
                      required: false,
                      value_type: "string",
                      value: "Enlarged Thyroid",
                      label: "Enlarged Thyroid",
                    },
                    {
                      answer_id: 18,
                      required: false,
                      value_type: "string",
                      value: "Depression",
                      label: "Depression",
                    },
                    {
                      answer_id: 19,
                      required: false,
                      value_type: "string",
                      value: "Anxiety",
                      label: "Anxiety",
                    },
                    {
                      answer_id: 20,
                      required: false,
                      value_type: "string",
                      value: "ADD or ADHD",
                      label: "ADD or ADHD",
                    },
                    {
                      answer_id: 21,
                      required: false,
                      value_type: "string",
                      value: "HIV",
                      label: "HIV",
                    },
                    {
                      answer_id: 22,
                      required: false,
                      value_type: "string",
                      value: "Hepatitis",
                      label: "Hepatitis",
                    },
                    {
                      answer_id: 23,
                      required: false,
                      value_type: "string",
                      value:
                        "Insomnia or Sleep Disorder, including Shift Work Sleep Disorder",
                      label:
                        "Insomnia or Sleep Disorder, including Shift Work Sleep Disorder",
                    },
                    {
                      answer_id: 24,
                      required: false,
                      value_type: "string",
                      value: "Seizures",
                      label: "Seizures",
                    },
                    {
                      answer_id: 25,
                      required: false,
                      value_type: "string",
                      value: "Frequent Headaches",
                      label: "Frequent Headaches",
                    },
                    {
                      answer_id: 26,
                      required: false,
                      value_type: "string",
                      value: "Anemia",
                      label: "Anemia",
                    },
                    {
                      answer_id: 27,
                      required: false,
                      value_type: "string",
                      value: "Arthritis or Joint Pain",
                      label: "Arthritis or Joint Pain",
                    },
                    {
                      answer_id: 28,
                      required: false,
                      value_type: "string",
                      value: "Osteoporosis",
                      label: "Osteoporosis",
                    },
                    {
                      answer_id: 29,
                      required: false,
                      value_type: "string",
                      value: "Gout",
                      label: "Gout",
                    },
                    {
                      answer_id: 30,
                      required: false,
                      value_type: "string",
                      value: "Autoimmune Disorder",
                      label: "Autoimmune Disorder",
                    },
                    {
                      answer_id: 31,
                      required: false,
                      value_type: "string",
                      value: "Cancer",
                      label: "Cancer",
                    },
                    {
                      answer_id: 32,
                      required: false,
                      value_type: "string",
                      value: "Cardiovascular Disease",
                      label: "Cardiovascular Disease",
                    },
                    {
                      answer_id: 33,
                      required: false,
                      value_type: "string",
                      value: "Blood Clot such as DVT or Pulmonary Embolism",
                      label: "Blood Clot such as DVT or Pulmonary Embolism",
                    },
                    {
                      answer_id: 34,
                      required: false,
                      value_type: "string",
                      value: "Heart Attack or Blockage",
                      label: "Heart Attack or Blockage",
                    },
                    {
                      answer_id: 35,
                      required: false,
                      value_type: "string",
                      value: "Congestive Heart Failure - CHF, Stroke or TIA",
                      label: "Congestive Heart Failure - CHF, Stroke or TIA",
                    },
                    {
                      answer_id: 36,
                      required: false,
                      value_type: "string",
                      value: "Acid Reflux",
                      label: "Acid Reflux",
                    },
                    {
                      answer_id: 37,
                      required: false,
                      value_type: "string",
                      value: "Obesity",
                      label: "Obesity",
                    },
                    {
                      answer_id: 38,
                      required: false,
                      value_type: "string",
                      value: "Neuropathy in Extremities",
                      label: "Neuropathy in Extremities",
                    },
                    {
                      answer_id: 39,
                      required: false,
                      value_type: "string",
                      value: "Excessive Sweating",
                      label: "Excessive Sweating",
                    },
                    {
                      answer_id: 40,
                      required: false,
                      value_type: "string",
                      value: "Blurry Vision",
                      label: "Blurry Vision",
                    },
                    {
                      answer_id: 41,
                      required: false,
                      value_type: "string",
                      value: "Irritable Bowel Syndrome",
                      label: "Irritable Bowel Syndrome",
                    },
                    {
                      answer_id: 42,
                      required: false,
                      value_type: "string",
                      value: "Frequent Urination",
                      label: "Frequent Urination",
                    },
                    {
                      answer_id: 43,
                      required: false,
                      value_type: "string",
                      value: "Dizziness with Standing",
                      label: "Dizziness with Standing",
                    },
                    {
                      answer_id: 44,
                      required: false,
                      value_type: "string",
                      value: "Blueish Fingers or Toes when Cold",
                      label: "Blueish Fingers or Toes when Cold",
                    },
                    {
                      answer_id: 45,
                      required: false,
                      value_type: "string",
                      value:
                        "Neuro-degenerative Disease such as Parkinson's, Alzheimer's, or ALS",
                      label:
                        "Neuro-degenerative Disease such as Parkinson's, Alzheimer's, or ALS",
                    },
                    {
                      answer_id: 46,
                      required: false,
                      value_type: "string",
                      value: "Gallbladder Disease",
                      label: "Gallbladder Disease",
                    },
                    {
                      answer_id: 47,
                      required: false,
                      value_type: "string",
                      value: "Kidney Injury",
                      label: "Kidney Injury",
                    },
                    {
                      answer_id: 48,
                      required: false,
                      value_type: "string",
                      value: "Drug Hypersensitivity",
                      label: "Drug Hypersensitivity",
                    },
                    {
                      answer_id: 49,
                      required: false,
                      value_type: "string",
                      value: "Diabetic Retinopathy",
                      label: "Diabetic Retinopathy",
                    },
                  ],
                },
                {
                  question_id: 49,
                  question: "Have you ever been diagnosed with kidney disease?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 50,
                  question:
                    "Have you ever been diagnosed with or have a family history of thyroid cancer?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 51,
                  question: "Have you ever been diagnosed with pancreatitis?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 52,
                  question: "Have you ever been diagnosed with MEN2?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 53,
                  question: "Surgical History",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "confirm",
                      value: "reviewed",
                      label: "I have reviewed and confirmed surgical history",
                    },
                  ],
                },
                {
                  question_id: 54,
                  question: "Do you have any future surgeries scheduled?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
              ],
            },
            {
              name: "Family Medical History",
              questions: [
                {
                  question_id: 55,
                  question: "Cardiovascular Disease",
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "yes",
                    },
                  ],
                },
                {
                  question_id: 56,
                  question: "Relation",
                  show_if: {
                    section_id: 5,
                    question_id: 1,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "Mother or Father",
                    },
                    {
                      answer_id: 2,
                      required: false,
                      value_type: "string",
                      value: "Brother or Sister",
                    },
                    {
                      answer_id: 3,
                      required: false,
                      value_type: "string",
                      value: "Paternal Grandparents",
                    },
                    {
                      answer_id: 4,
                      required: false,
                      value_type: "string",
                      value: "Maternal Grandparents",
                    },
                    {
                      answer_id: 5,
                      required: false,
                      value_type: "string",
                      value: "Other",
                    },
                  ],
                },
                {
                  question_id: 57,
                  question: "Heart Attack",
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "yes",
                    },
                  ],
                },
                {
                  question_id: 58,
                  question: "Relation",
                  show_if: {
                    section_id: 5,
                    question_id: 3,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "Mother or Father",
                    },
                    {
                      answer_id: 2,
                      required: false,
                      value_type: "string",
                      value: "Brother or Sister",
                    },
                    {
                      answer_id: 3,
                      required: false,
                      value_type: "string",
                      value: "Paternal Grandparents",
                    },
                    {
                      answer_id: 4,
                      required: false,
                      value_type: "string",
                      value: "Maternal Grandparents",
                    },
                    {
                      answer_id: 5,
                      required: false,
                      value_type: "string",
                      value: "Other",
                    },
                  ],
                },
                {
                  question_id: 59,
                  question: "Stroke",
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "yes",
                    },
                  ],
                },
                {
                  question_id: 60,
                  question: "Relation",
                  show_if: {
                    section_id: 5,
                    question_id: 5,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "Mother or Father",
                    },
                    {
                      answer_id: 2,
                      required: false,
                      value_type: "string",
                      value: "Brother or Sister",
                    },
                    {
                      answer_id: 3,
                      required: false,
                      value_type: "string",
                      value: "Paternal Grandparents",
                    },
                    {
                      answer_id: 4,
                      required: false,
                      value_type: "string",
                      value: "Maternal Grandparents",
                    },
                    {
                      answer_id: 5,
                      required: false,
                      value_type: "string",
                      value: "Other",
                    },
                  ],
                },
                {
                  question_id: 61,
                  question: "Endocrine Disease",
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "yes",
                    },
                  ],
                },
                {
                  question_id: 62,
                  question: "Relation",
                  show_if: {
                    section_id: 5,
                    question_id: 7,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "Mother or Father",
                    },
                    {
                      answer_id: 2,
                      required: false,
                      value_type: "string",
                      value: "Brother or Sister",
                    },
                    {
                      answer_id: 3,
                      required: false,
                      value_type: "string",
                      value: "Paternal Grandparents",
                    },
                    {
                      answer_id: 4,
                      required: false,
                      value_type: "string",
                      value: "Maternal Grandparents",
                    },
                    {
                      answer_id: 5,
                      required: false,
                      value_type: "string",
                      value: "Other",
                    },
                  ],
                },
                {
                  question_id: 63,
                  question: "Diabetes",
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "yes",
                    },
                  ],
                },
                {
                  question_id: 64,
                  question: "Relation",
                  show_if: {
                    section_id: 5,
                    question_id: 9,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "Mother or Father",
                    },
                    {
                      answer_id: 2,
                      required: false,
                      value_type: "string",
                      value: "Brother or Sister",
                    },
                    {
                      answer_id: 3,
                      required: false,
                      value_type: "string",
                      value: "Paternal Grandparents",
                    },
                    {
                      answer_id: 4,
                      required: false,
                      value_type: "string",
                      value: "Maternal Grandparents",
                    },
                    {
                      answer_id: 5,
                      required: false,
                      value_type: "string",
                      value: "Other",
                    },
                  ],
                },
                {
                  question_id: 65,
                  question: "Hypothyroidism",
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "yes",
                    },
                  ],
                },
                {
                  question_id: 66,
                  question: "Relation",
                  show_if: {
                    section_id: 5,
                    question_id: 11,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "Mother or Father",
                    },
                    {
                      answer_id: 2,
                      required: false,
                      value_type: "string",
                      value: "Brother or Sister",
                    },
                    {
                      answer_id: 3,
                      required: false,
                      value_type: "string",
                      value: "Paternal Grandparents",
                    },
                    {
                      answer_id: 4,
                      required: false,
                      value_type: "string",
                      value: "Maternal Grandparents",
                    },
                    {
                      answer_id: 5,
                      required: false,
                      value_type: "string",
                      value: "Other",
                    },
                  ],
                },
                {
                  question_id: 67,
                  question: "Delayed Puberty",
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "yes",
                    },
                  ],
                },
                {
                  question_id: 68,
                  question: "Relation",
                  show_if: {
                    section_id: 5,
                    question_id: 13,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "Mother or Father",
                    },
                    {
                      answer_id: 2,
                      required: false,
                      value_type: "string",
                      value: "Brother or Sister",
                    },
                    {
                      answer_id: 3,
                      required: false,
                      value_type: "string",
                      value: "Paternal Grandparents",
                    },
                    {
                      answer_id: 4,
                      required: false,
                      value_type: "string",
                      value: "Maternal Grandparents",
                    },
                    {
                      answer_id: 5,
                      required: false,
                      value_type: "string",
                      value: "Other",
                    },
                  ],
                },
                {
                  question_id: 69,
                  question: "Reproductive Disorder",
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "yes",
                    },
                  ],
                },
                {
                  question_id: 70,
                  question: "Relation",
                  show_if: {
                    section_id: 5,
                    question_id: 15,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "Mother or Father",
                    },
                    {
                      answer_id: 2,
                      required: false,
                      value_type: "string",
                      value: "Brother or Sister",
                    },
                    {
                      answer_id: 3,
                      required: false,
                      value_type: "string",
                      value: "Paternal Grandparents",
                    },
                    {
                      answer_id: 4,
                      required: false,
                      value_type: "string",
                      value: "Maternal Grandparents",
                    },
                    {
                      answer_id: 5,
                      required: false,
                      value_type: "string",
                      value: "Other",
                    },
                  ],
                },
                {
                  question_id: 71,
                  question: "Breast Cancer",
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "yes",
                    },
                  ],
                },
                {
                  question_id: 72,
                  question: "Relation",
                  show_if: {
                    section_id: 5,
                    question_id: 17,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "Mother or Father",
                    },
                    {
                      answer_id: 2,
                      required: false,
                      value_type: "string",
                      value: "Brother or Sister",
                    },
                    {
                      answer_id: 3,
                      required: false,
                      value_type: "string",
                      value: "Paternal Grandparents",
                    },
                    {
                      answer_id: 4,
                      required: false,
                      value_type: "string",
                      value: "Maternal Grandparents",
                    },
                    {
                      answer_id: 5,
                      required: false,
                      value_type: "string",
                      value: "Other",
                    },
                  ],
                },
                {
                  question_id: 73,
                  question: "Ovarian, Uterine, Cervical Cancer",
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "yes",
                    },
                  ],
                },
                {
                  question_id: 74,
                  question: "Relation",
                  show_if: {
                    section_id: 5,
                    question_id: 19,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "Mother or Father",
                    },
                    {
                      answer_id: 2,
                      required: false,
                      value_type: "string",
                      value: "Brother or Sister",
                    },
                    {
                      answer_id: 3,
                      required: false,
                      value_type: "string",
                      value: "Paternal Grandparents",
                    },
                    {
                      answer_id: 4,
                      required: false,
                      value_type: "string",
                      value: "Maternal Grandparents",
                    },
                    {
                      answer_id: 5,
                      required: false,
                      value_type: "string",
                      value: "Other",
                    },
                  ],
                },
              ],
            },
            {
              name: "Social History",
              questions: [
                {
                  question_id: 75,
                  question: "How often do you exercise?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "None",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "Rarely",
                    },
                    {
                      answer_id: 3,
                      required: true,
                      value_type: "string",
                      value: "Once a month",
                    },
                    {
                      answer_id: 4,
                      required: true,
                      value_type: "string",
                      value: "Twice a month",
                    },
                    {
                      answer_id: 5,
                      required: true,
                      value_type: "string",
                      value: "Once a week",
                    },
                    {
                      answer_id: 6,
                      required: true,
                      value_type: "string",
                      value: "Twice a week",
                    },
                    {
                      answer_id: 7,
                      required: true,
                      value_type: "string",
                      value: "Three times a week",
                    },
                    {
                      answer_id: 8,
                      required: true,
                      value_type: "string",
                      value: "Daily",
                    },
                  ],
                },
                {
                  question_id: 76,
                  question: "If so, what type of exercise?",
                  show_if: {
                    section_id: 6,
                    question_id: 1,
                    answer_ids: [2, 3, 4, 5, 6, 7, 8],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "Cardio",
                      label: "Cardio",
                    },
                    {
                      answer_id: 2,
                      required: false,
                      value_type: "string",
                      value: "Yoga",
                      label: "Yoga",
                    },
                    {
                      answer_id: 3,
                      required: false,
                      value_type: "string",
                      value: "Weight Lifting",
                      label: "Weight Lifting",
                    },
                    {
                      answer_id: 4,
                      required: false,
                      value_type: "string",
                      value: "HIIT",
                      label: "HIIT",
                    },
                    {
                      answer_id: 5,
                      required: false,
                      value_type: "string",
                      value: "Other",
                      label: "Other",
                    },
                  ],
                },
                {
                  question_id: 77,
                  question: "What is your daily caffeine intake?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "None",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "Low",
                    },
                    {
                      answer_id: 3,
                      required: true,
                      value_type: "string",
                      value: "Medium",
                    },
                    {
                      answer_id: 4,
                      required: true,
                      value_type: "string",
                      value: "High",
                    },
                  ],
                },
                {
                  question_id: 78,
                  question: "If so, what type of caffeine intake?",
                  show_if: {
                    section_id: 6,
                    question_id: 3,
                    answer_ids: [2, 3, 4],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "Tea",
                      label: "Tea",
                    },
                    {
                      answer_id: 2,
                      required: false,
                      value_type: "string",
                      value: "Coffee",
                      label: "Coffee",
                    },
                    {
                      answer_id: 3,
                      required: false,
                      value_type: "string",
                      value: "Soda",
                      label: "Soda",
                    },
                    {
                      answer_id: 4,
                      required: false,
                      value_type: "string",
                      value: "Energy Drinks",
                      label: "Energy Drinks",
                    },
                  ],
                },
                {
                  question_id: 79,
                  question: "Do you smoke cigarettes?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "yes",
                      label: "Yes",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "no",
                      label: "No",
                    },
                  ],
                },
                {
                  question_id: 80,
                  question: "If yes, how many per day?",
                  show_if: {
                    section_id: 6,
                    question_id: 5,
                    answer_ids: [1],
                  },
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "numeric",
                    },
                  ],
                  validation: {
                    type: "regex_pattern",
                    value: "^[0-9]{0,2}$",
                    error_message: "Please enter a valid number of cigarettes",
                  },
                },
                {
                  question_id: 81,
                  question: "How often do you use marijuana products?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "None",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "Daily",
                    },
                    {
                      answer_id: 3,
                      required: true,
                      value_type: "string",
                      value: "Weekly",
                    },
                    {
                      answer_id: 4,
                      required: true,
                      value_type: "string",
                      value: "Monthly",
                    },
                  ],
                },
                {
                  question_id: 82,
                  question: "What is your alcohol intake?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "0-2 drinks per week",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "3-4 drinks per week",
                    },
                    {
                      answer_id: 3,
                      required: true,
                      value_type: "string",
                      value: "5 or more drinks per week",
                    },
                  ],
                },
              ],
            },
            {
              name: "Dietary Habits",
              questions: [
                {
                  question_id: 83,
                  question: "Check all that apply",
                  answers: [
                    {
                      answer_id: 1,
                      required: false,
                      value_type: "string",
                      value: "Do you eat when you are depressed?",
                      label: "Do you eat when you are depressed?",
                    },
                    {
                      answer_id: 2,
                      required: false,
                      value_type: "string",
                      value: "Do you eat when you are anxious?",
                      label: "Do you eat when you are anxious?",
                    },
                    {
                      answer_id: 3,
                      required: false,
                      value_type: "string",
                      value: "Do you eat when you are alone?",
                      label: "Do you eat when you are alone?",
                    },
                    {
                      answer_id: 4,
                      required: false,
                      value_type: "string",
                      value: "Do you eat when you are in front of the TV?",
                      label: "Do you eat when you are in front of the TV?",
                    },
                  ],
                },
                {
                  question_id: 84,
                  question: "What is your salt intake?",
                  answers: [
                    {
                      answer_id: 1,
                      required: true,
                      value_type: "string",
                      value: "low",
                      label: "Low",
                    },
                    {
                      answer_id: 2,
                      required: true,
                      value_type: "string",
                      value: "medium",
                      label: "Medium",
                    },
                    {
                      answer_id: 3,
                      required: true,
                      value_type: "string",
                      value: "high",
                      label: "High",
                    },
                  ],
                },
              ],
            },
          ],
        },
      ];

      const responses = {};
      let patientData = {
        name: "",
        email: "",
      };
      let showResults = false;
      let errors = {};
      let score = {
        ExpressedSocialInclusion: 0,
        WantedSocialInclusion: 0,
        ExpressedDecissionMaking: 0,
        WantedDecissionMaking: 0,
        ExpressedAcceptance: 0,
        WantedAcceptance: 0,
        SensoryImpact: 0,
      };

      // Function to handle response changes
      function handleResponseChange(questionId, value) {
        responses[questionId] = value;
        errors[questionId] = false; // Clear error for this question
        console.log(responses);
      }

      function restart() {
        location.reload();
      }

      function answerAllQuestionsRandomly() {
        // Assuming your question sections are inside a `questions` array
        questions[0].sections.forEach((section) => {
          section.questions.forEach((question) => {
            // Generate a random integer from 0 to 4
            const randomAnswer = Math.floor(Math.random() * 5);

            // Find the radio input for this question and answer it randomly
            const inputSelector = `input[name="question_${question.question_id}"][value="${randomAnswer}"]`;
            const inputElement = document.querySelector(inputSelector);

            if (inputElement) {
              inputElement.checked = true; // Check the radio button

              // Update the responses object with the selected answer
              responses[question.question_id] = randomAnswer;
            }
          });
        });

        // Log the updated responses object
        console.log("Updated Responses: ", responses);
      }

      // Function to calculate and display the score
      const calculateScore = () => {
        // Validate responses before calculating the score
        if (!validateResponses()) {
          alert("Please answer all questions before submitting.");
          return;
        }

        // Initialize a score object for each section
        const newScore = {
          ExpressedSocialInclusion: 0,
          WantedSocialInclusion: 0,
          ExpressedDecissionMaking: 0,
          WantedDecissionMaking: 0,
          ExpressedAcceptance: 0,
          WantedAcceptance: 0,
          SensoryImpact: 0,
        };

        // Iterate through responses to calculate the score
        Object.entries(responses).forEach(([key, value]) => {
          // Find the question based on question_id
          const question = questions[0].sections
            .flatMap((section) => section.questions)
            .find((q) => q.question_id == key);

          if (question) {
            // Determine the section of the found question
            const section = questions[0].sections.find((sec) =>
              sec.questions.some((q) => q.question_id === question.question_id)
            );

            if (section) {
              // Determine the category based on section name
              const sectionName = section.name;

              // Map section name to corresponding score category
              switch (sectionName) {
                case "Demographics":
                  newScore.ExpressedSocialInclusion += value;
                  break;
                case "Health History":
                  newScore.WantedSocialInclusion += value;
                  break;
                case "Behavioral Health":
                  newScore.ExpressedDecissionMaking += value;
                  break;
                case "Medical History":
                  newScore.WantedDecissionMaking += value;
                  break;
                case "Family Medical History":
                  newScore.ExpressedAcceptance += value;
                  break;
                case "Social History":
                  newScore.WantedAcceptance += value;
                  break;
                case "Dietary Habits":
                  newScore.SensoryImpact += value;
                  break;
                default:
                  console.warn(`Unrecognized section: ${sectionName}`);
              }
              score = newScore;
            }
          } else {
            console.log("Question not found for Question ID:", key);
          }
        });
      };

      // Function to validate response
      function validateResponses() {
        errors = {};
        let allValid = true;

        questions[0].sections.map((section) => {
          section.questions.forEach((question) => {
            if (responses[question.question_id] === undefined) {
              errors[question.question_id] = true;
              allValid = false;
            }
          });
        });

        return allValid;
      }

      // Quiz Results JS starts
      function renderResult() {
        const totalExpressed =
          score.ExpressedSocialInclusion +
          score.ExpressedDecissionMaking +
          score.ExpressedAcceptance;
        const totalWanted =
          score.WantedSocialInclusion +
          score.WantedDecissionMaking +
          score.WantedAcceptance;
        const overall = totalExpressed + totalWanted;
        console.log("patient data: ", patientData);
        const resultHTML = `
          <div class="space-y-3 grid grid-cols-1 mx-auto overflow-x-auto px-5 pb-2 ">
            <h2 class="text-2xl font-bold text-[#1d126c]">Dear ${
              patientData.name
            },</h2>
            <h2 class="text-2xl mb-6">Neurodivergent Workplace Inclusion Score:</h2>
            <div class="flex relative w-[1024px] ml-3 ">
              <p class="-rotate-90 absolute top-1/2 right-[97%] font-bold text-green-500">EXPRESSED</p>
              <div class="grid grid-cols-4 gap-3 w-full">
                <div>
                  <p class="uppercase text-center text-blue-500 font-bold">Social Inclusion</p>
                  <div class=" border-2 border-[#746E5E]  overflow-hidden">
                    <p class="bg-[#746E5E] p-3 text-center text-white">Expressed Social Inclusion</p>
                    <p class="p-6 text-center text-xl font-medium">${
                      score.ExpressedSocialInclusion
                    }</p>
                  </div>
                </div>
                <div>
                  <p class="uppercase text-center text-[#009EEC] font-bold">Decision Making</p>
                  <div class=" bg-white border-2 border-[#746E5E] overflow-hidden">
                    <p class="bg-[#746E5E] p-3 text-center text-white">Expressed Decision Making</p>
                    <p class="p-6 text-center text-xl font-medium">${
                      score.ExpressedDecissionMaking
                    }</p>
                  </div>
                </div>
                <div>
                  <p class="uppercase text-center text-[#1D126C] font-bold">Acceptance</p>
                  <div class=" bg-white border-2 border-[#746E5E] overflow-hidden">
                    <p class="bg-[#746E5E] p-3 text-center text-white ">Expressed Acceptance</p>
                    <p class="p-6 text-center text-xl font-medium">${
                      score.ExpressedAcceptance
                    }</p>
                  </div>
                </div>
                <div>
                  <br />
                  <div class=" bg-white border-2 border-[#746E5E] overflow-hidden">
                    <p class="bg-[#39A281] text-white p-3 text-center">Total Expressed Behavior</p>
                    <p class="p-6 text-center text-xl font-medium">${totalExpressed}</p>
                  </div>
                </div>
              </div>
            </div>

            <!-- Wanted Row -->
            <div class="flex relative w-[1024px] ml-3">
              <p class="-rotate-90 absolute top-1/2 right-[98.5%] text-[#9B1980] font-bold">WANTED</p>
              <div class="grid grid-cols-4 gap-3 w-full">
                <div class=" bg-white border-2 border-[#746E5E] overflow-hidden">
                  <p class="bg-[#746E5E] p-3 text-center text-white">Wanted Social Inclusion</p>
                  <p class="p-6 text-center text-xl font-medium">${
                    score.WantedSocialInclusion
                  }</p>
                </div>
                <div class=" bg-white border-2 border-[#746E5E] overflow-hidden">
                  <p class="bg-[#746E5E] p-3 text-center text-white">Wanted Decision Making</p>
                  <p class="p-6 text-center text-xl font-medium">${
                    score.WantedDecissionMaking
                  }</p>
                </div>
                <div class=" bg-white border-2 border-[#746E5E] overflow-hidden">
                  <p class="bg-[#746E5E] p-3 text-center text-white">Wanted Acceptance</p>
                  <p class="p-6 text-center text-xl font-medium">${
                    score.WantedAcceptance
                  }</p>
                </div>
                <div class=" bg-white border-2 border-[#746E5E] overflow-hidden">
                  <p class="bg-[#9B1980] text-white p-3 text-center">Total Wanted Behavior</p>
                  <p class="p-6 text-center text-xl font-medium">${totalWanted}</p>
                </div>
              </div>
            </div>

            <!-- Overall Result -->
            <div class="flex relative w-[1024px] ml-3">
              <div class="grid grid-cols-4 gap-3 w-full">
                <div class="border-2 border-[#746E5E] bg-white overflow-hidden">
                  <p class="bg-blue-500 text-white p-3 text-center">Total For Social Inclusion</p>
                  <p class="p-6 text-center text-xl font-medium">${
                    score.WantedSocialInclusion + score.ExpressedSocialInclusion
                  }</p>
                </div>
                <div class=" bg-white border-2 border-[#746E5E] overflow-hidden bg-white">
                  <p class="bg-[#009EEC] text-white p-3 text-center">Total For Decision Making</p>
                  <p class="p-6 text-center text-xl font-medium">${
                    score.WantedDecissionMaking + score.ExpressedDecissionMaking
                  }</p>
                </div>
                <div class=" bg-white border-2 border-[#746E5E] overflow-hidden  bg-white">
                  <p class="bg-[#1D126C] p-3 text-center text-white">Total For Acceptance</p>
                  <p class="p-6 text-center text-xl font-medium">${
                    score.WantedAcceptance + score.ExpressedAcceptance
                  }</p>
                </div>
                <div class=" bg-white border-2 border-[#746E5E] overflow-hidden  bg-white">
                  <p class="bg-[#E2D000] text-white p-3 text-center">Overall</p>
                  <p class="p-6 text-center text-xl font-medium">${overall}</p>
                </div>
              </div>
            </div>
          </div>
        `;

        document.getElementById("result-container").innerHTML = resultHTML;
      }

      // Render the result when the page loads
      renderResult();
      // Quiz Results JS ends

      document.getElementById("result-container").classList.add("hidden");
      // document.getElementById("statisctics").classList.add("hidden");

      function handleSubmit() {
        console.log("handle Submit triggered");
        if (!validateResponses()) {
          alert("Please answer all questions before submitting.");
          return;
        }

        document.getElementById("quiz-app").classList.add("hidden");
        document.getElementById("result-container").classList.remove("hidden");
        document.getElementById("charts-container").classList.remove("hidden");

        // document.getElementById("statisctics").classList.remove("hidden");

        calculateScore();
        renderResult();

        const nameInput = document.getElementById("name").value;
        const emailInput = document.getElementById("email").value;
        patientData.email = emailInput;
        patientData.name = nameInput;

        const dataForWebHook = {
          responses,
          patientData,
          score,
        };

        sendToWebhook(dataForWebHook);

        const ctx = document.getElementById("si-graph").getContext("2d");
        console.log("ESI: ", score);
        const data = {
          labels: ["Expressed", "Wanted"],
          datasets: [
            {
              label: "",
              data: [
                score.ExpressedSocialInclusion,
                score.WantedSocialInclusion,
              ],
              backgroundColor: "#FC963B",
              barThickness: 30,
            },
          ],
        };

        const options = {
          indexAxis: "y", // Make the bars horizontal
          scales: {
            x: {
              beginAtZero: true,
              max: 30, // Set the maximum value to 30
              ticks: {
                stepSize: 5, // Set the step size to 5
              },
              grid: {
                borderDash: [3, 3], // Dashed lines for the X-axis
                color: "rgba(0, 0, 0, 0.1)", // Light gray lines for grid
              },
            },
            y: {
              grid: {
                borderDash: [3, 3], // Dashed lines for the Y-axis as well
                color: "rgba(0, 0, 0, 0.1)", // Light gray lines for grid
                drawBorder: false, // Remove border around y-axis
              },
            },
          },
          plugins: {
            legend: {
              display: false,
            },
            tooltip: {
              enabled: true,
            },
          },
        };

        const siGraph = new Chart(ctx, {
          type: "bar",
          data: data,
          options: options,
        });

        const dmCtx = document.getElementById("dm-graph").getContext("2d");
        new Chart(dmCtx, {
          type: "bar",
          data: {
            labels: ["Expressed", "Wanted"],
            datasets: [
              {
                label: "",
                data: [
                  score.ExpressedDecissionMaking,
                  score.WantedDecissionMaking,
                ],
                backgroundColor: "#FC963B",
                barThickness: 30,
              },
            ],
          },
          options: {
            indexAxis: "y", // Horizontal bar chart
            scales: {
              x: {
                beginAtZero: true,
                max: 30, // Adjust based on your data
                ticks: {
                  stepSize: 5,
                },
                grid: {
                  borderDash: [3, 3],
                  color: "rgba(0, 0, 0, 0.1)",
                },
              },
              y: {
                grid: {
                  borderDash: [3, 3],
                  color: "rgba(0, 0, 0, 0.1)",
                  drawBorder: false,
                },
              },
            },
            plugins: {
              legend: {
                display: false,
              },
              tooltip: {
                enabled: true,
              },
            },
          },
        });

        // Chart for Sensory Impact
        const siCtx = document.getElementById("simp-graph").getContext("2d");
        new Chart(siCtx, {
          type: "bar",
          data: {
            labels: ["Expressed", "Wanted"],
            datasets: [
              {
                label: "",
                data: [score.ExpressedAcceptance, score.WantedAcceptance],
                backgroundColor: "#FC963B",
                barThickness: 30,
              },
            ],
          },
          options: {
            indexAxis: "y", // Horizontal bar chart
            scales: {
              x: {
                beginAtZero: true,
                max: 30, // Adjust based on your data
                ticks: {
                  stepSize: 5,
                },
                grid: {
                  borderDash: [3, 3],
                  color: "rgba(0, 0, 0, 0.1)",
                },
              },
              y: {
                grid: {
                  borderDash: [3, 3],
                  color: "rgba(0, 0, 0, 0.1)",
                  drawBorder: false,
                },
              },
            },
            plugins: {
              legend: {
                display: false,
              },
              tooltip: {
                enabled: true,
              },
            },
          },
        });
      }

      function findQuestion(questionId) {
        for (const section of questions) {
          for (const question of section.questions) {
            if (question.question_id === questionId) {
              return question;
            }
          }
        }
        return null;
      }

      function findSectionName(questionId) {
        for (const section of questions) {
          if (section.questions.some((q) => q.question_id === questionId)) {
            return section.name;
          }
        }
        return null;
      }

      function handleReset() {
        responses = {};
        errors = {};
        showResults = false;
        renderQuiz();
      }

      document.getElementById("quiz-app").classList.add("hidden");
      // document.getElementById("quiz-app").classList.add("hidden");

      function renderQuiz() {
        document.getElementById("patient-info").classList.add("hidden");
        document.getElementById("quiz-app").classList.remove("hidden");
        document.getElementById("answer_button").classList.remove("hidden");

        document.getElementById("quiz-app").innerHTML = `
          <div class="max-w-screen-sm mx-auto p-5">
            <h1 class="text-2xl font-bold text-center mb-6">Neurodivergent Workplace Inclusion Test</h1>
            ${questions[0].sections
              .map(
                (section) => `
              <div class="bg-white rounded-lg p-5 border">
                <h2 class="text-xl font-semibold mb-2 -mt-1">${
                  section.name
                }</h2>
                ${section.questions
                  .map(
                    (question, questionIndex) => `
                  <div class="mb-4  p-4 rounded-lg bg-gray-100">
                    <p class="font-medium">${questionIndex + 1}. ${
                      question.question
                    }</p>
                    <div class="grid grid-cols-1">
                      ${[0, 1, 2, 3, 4]
                        .map(
                          (value) => `
                        <label class="inline-flex items-center mr-4">
                          <input type="radio" name="question_${
                            question.question_id
                          }" value="${value}" onchange="handleResponseChange(${
                            question.question_id
                          }, ${value})">
                          <span class="px-1 ml-1 rounded hover:text-blue-500 cursor-pointer transition-colors duration-200 hover:bg-gray-100 ">${
                            value === 0
                              ? "Not at all"
                              : value === 1
                              ? "Sometimes"
                              : value === 2
                              ? "On Occasion"
                              : value === 3
                              ? "Most of the time"
                              : "All the time"
                          }</span>
                        </label>
                      `
                        )
                        .join("")}
                    </div>
                    ${
                      errors[question.question_id]
                        ? '<p class="text-red-500 text-sm">Please select an answer.</p>'
                        : ""
                    }
                  </div>
                `
                  )
                  .join("")}
              </div>
            `
              )
              .join("")}
            <button onclick="handleSubmit()" class="mt-4 p-3 bg-blue-600 text-white rounded">Submit</button>
          </div>
        `;
      }

      // Initial render of the quiz

      // renderQuiz();
      // Quiz JS Ends

      function sendToWebhook(data) {
        fetch(
          "https://services.leadconnectorhq.com/hooks/X11laCn76m2ZqQWTRr3w/webhook-trigger/cefc5cfe-9f15-46e2-9652-13c315a58c67",
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
          }
        )
          .then((response) => response.json())
          .then((data) => {
            console.log("Webhook Success:", data);
          })
          .catch((error) => {
            console.error("Webhook Error:", error);
          });
      }
    </script>
  </body>
</html>
